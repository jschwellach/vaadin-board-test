<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"></head><body><dom-module id="vaadin-board-row"><template><style>:host{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;}:host ::slotted(*){box-sizing:border-box;flex-grow:1;overflow:hidden;}</style><slot id="insertionPoint"></slot></template><script>class VaadinBoardRow extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element){static get is(){return"vaadin-board-row"}constructor(){super(),this._onIronResize=this._onIronResize.bind(this),this._ONE_COLUMN_MAX_WIDTH=600,this._TWO_COLUMNS_MAX_WIDTH=960,this._SMALL_VIEWPORT_CLASSNAME="small",this._MEDIUM_VIEWPORT_CLASSNAME="medium",this._LARGE_VIEWPORT_CLASSNAME="large",this._oldWidth=0,this._oldFlexBasis=[]}ready(){super.ready(),this.addEventListener("iron-resize",this._onIronResize,!0),this.$.insertionPoint.addEventListener("slotchange",this.redraw.bind(this)),Polymer.RenderStatus.afterNextRender(this,function(){this.dispatchEvent(new CustomEvent("iron-request-resize-notifications",{node:this,bubbles:!0,cancelable:!0,composed:!0,detail:{}}))})}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.afterNextRender(this,this._onIronResize)}_addStyleNames(c){c<this._ONE_COLUMN_MAX_WIDTH?(this.classList.add(this._SMALL_VIEWPORT_CLASSNAME),this.classList.remove(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.remove(this._LARGE_VIEWPORT_CLASSNAME)):c<this._TWO_COLUMNS_MAX_WIDTH?(this.classList.remove(this._SMALL_VIEWPORT_CLASSNAME),this.classList.add(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.remove(this._LARGE_VIEWPORT_CLASSNAME)):(this.classList.remove(this._SMALL_VIEWPORT_CLASSNAME),this.classList.remove(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.add(this._LARGE_VIEWPORT_CLASSNAME))}_calculateFlexBasis(c,d,f){d<this._ONE_COLUMN_MAX_WIDTH?f=1:d<this._TWO_COLUMNS_MAX_WIDTH&&4==f&&(f=2);let g=100*(c/f);return g=100<g?100:g,g+"%"}_reportError(){console.warn("The column configuration is not valid; column count should add up to 3 or 4.","check: \r\n"+this.outerHTML)}_parseBoardCols(c){const d=c.map(h=>{return h.getAttribute("board-cols")?parseInt(h.getAttribute("board-cols")):1});let f=4,g=[];return c.forEach((h,j)=>{f-=d[j]}),0>f?(this._reportError(),d.forEach((h,j)=>{g[j]=1})):g=d.slice(0),g}_removeExtraNodesFromDOM(c,d){let f=!1,g=4,h=[];return d.forEach((j,k)=>{g-=c[k],0>g?(!f&&(f=!0,this._reportError()),this.removeChild(j)):h[k]=j}),h}redraw(){this._recalculateFlexBasis(!0)}_onIronResize(){Polymer.dom.flush(),this._recalculateFlexBasis(!1)}_recalculateFlexBasis(c){const d=this.getBoundingClientRect().width;if(c||d!=this._oldWidth){const f=this.$.insertionPoint.assignedNodes(),g=f.filter(k=>k.nodeType!==k.TEXT_NODE);this._addStyleNames(d);const h=this._parseBoardCols(g),j=h.reduce((k,l)=>k+l,0);this._removeExtraNodesFromDOM(h,g).forEach((k,l)=>{let m=this._calculateFlexBasis(h[l],d,j);(c||!this._oldFlexBasis[l]||this._oldFlexBasis[l]!=m)&&(this._oldFlexBasis[l]=m,k.style.flexBasis=m)}),this._oldWidth=d}}}customElements.define(VaadinBoardRow.is,VaadinBoardRow);</script></dom-module></body></html>
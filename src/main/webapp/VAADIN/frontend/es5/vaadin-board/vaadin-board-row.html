<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"></head><body><dom-module id="vaadin-board-row"><template><style>:host{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;}:host ::slotted(*){box-sizing:border-box;flex-grow:1;overflow:hidden;}</style><slot id="insertionPoint"></slot></template><script>var _get=function c(d,f,g){null===d&&(d=Function.prototype);var h=Object.getOwnPropertyDescriptor(d,f);if(h===void 0){var j=Object.getPrototypeOf(d);return null===j?void 0:c(j,f,g)}if("value"in h)return h.value;var k=h.get;return void 0===k?void 0:k.call(g)},_createClass=function(){function c(d,f){for(var h,g=0;g<f.length;g++)h=f[g],h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}return function(d,f,g){return f&&c(d.prototype,f),g&&c(d,g),d}}();function _classCallCheck(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&("object"==typeof d||"function"==typeof d)?d:c}function _inherits(c,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var VaadinBoardRow=function(c){function d(){_classCallCheck(this,d);var f=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return f._onIronResize=f._onIronResize.bind(f),f._ONE_COLUMN_MAX_WIDTH=600,f._TWO_COLUMNS_MAX_WIDTH=960,f._SMALL_VIEWPORT_CLASSNAME="small",f._MEDIUM_VIEWPORT_CLASSNAME="medium",f._LARGE_VIEWPORT_CLASSNAME="large",f._oldWidth=0,f._oldFlexBasis=[],f}return _inherits(d,c),_createClass(d,null,[{key:"is",get:function(){return"vaadin-board-row"}}]),_createClass(d,[{key:"ready",value:function(){_get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"ready",this).call(this),this.addEventListener("iron-resize",this._onIronResize,!0),this.$.insertionPoint.addEventListener("slotchange",this.redraw.bind(this)),Polymer.RenderStatus.afterNextRender(this,function(){this.dispatchEvent(new CustomEvent("iron-request-resize-notifications",{node:this,bubbles:!0,cancelable:!0,composed:!0,detail:{}}))})}},{key:"connectedCallback",value:function(){_get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"connectedCallback",this).call(this),Polymer.RenderStatus.afterNextRender(this,this._onIronResize)}},{key:"_addStyleNames",value:function(g){g<this._ONE_COLUMN_MAX_WIDTH?(this.classList.add(this._SMALL_VIEWPORT_CLASSNAME),this.classList.remove(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.remove(this._LARGE_VIEWPORT_CLASSNAME)):g<this._TWO_COLUMNS_MAX_WIDTH?(this.classList.remove(this._SMALL_VIEWPORT_CLASSNAME),this.classList.add(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.remove(this._LARGE_VIEWPORT_CLASSNAME)):(this.classList.remove(this._SMALL_VIEWPORT_CLASSNAME),this.classList.remove(this._MEDIUM_VIEWPORT_CLASSNAME),this.classList.add(this._LARGE_VIEWPORT_CLASSNAME))}},{key:"_calculateFlexBasis",value:function(g,h,j){h<this._ONE_COLUMN_MAX_WIDTH?j=1:h<this._TWO_COLUMNS_MAX_WIDTH&&4==j&&(j=2);var k=100*(g/j);return k=100<k?100:k,k+"%"}},{key:"_reportError",value:function(){console.warn("The column configuration is not valid; column count should add up to 3 or 4.","check: \r\n"+this.outerHTML)}},{key:"_parseBoardCols",value:function(g){var h=g.map(function(l){return l.getAttribute("board-cols")?parseInt(l.getAttribute("board-cols")):1}),j=4,k=[];return g.forEach(function(l,m){j-=h[m]}),0>j?(this._reportError(),h.forEach(function(l,m){k[m]=1})):k=h.slice(0),k}},{key:"_removeExtraNodesFromDOM",value:function(g,h){var j=this,k=!1,l=4,m=[];return h.forEach(function(n,o){l-=g[o],0>l?(!k&&(k=!0,j._reportError()),j.removeChild(n)):m[o]=n}),m}},{key:"redraw",value:function(){this._recalculateFlexBasis(!0)}},{key:"_onIronResize",value:function(){Polymer.dom.flush(),this._recalculateFlexBasis(!1)}},{key:"_recalculateFlexBasis",value:function(g){var h=this,j=this.getBoundingClientRect().width;if(g||j!=this._oldWidth){var k=this.$.insertionPoint.assignedNodes(),l=k.filter(function(o){return o.nodeType!==o.TEXT_NODE});this._addStyleNames(j);var m=this._parseBoardCols(l),n=m.reduce(function(o,p){return o+p},0);this._removeExtraNodesFromDOM(m,l).forEach(function(o,p){var q=h._calculateFlexBasis(m[p],j,n);(g||!h._oldFlexBasis[p]||h._oldFlexBasis[p]!=q)&&(h._oldFlexBasis[p]=q,o.style.flexBasis=q)}),this._oldWidth=j}}}]),d}(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element));customElements.define(VaadinBoardRow.is,VaadinBoardRow);</script></dom-module></body></html>